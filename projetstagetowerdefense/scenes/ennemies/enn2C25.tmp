[gd_scene load_steps=9 format=3 uid="uid://p8thsxgwoml7"]

[ext_resource type="ArrayMesh" uid="uid://cb4wmgckvpug5" path="res://assets/3d/enemy_ufoGreen.obj" id="1_1v4y8"]
[ext_resource type="Shader" path="res://scenes/ennemies/health_bar.gdshader" id="2_bnd7i"]
[ext_resource type="Script" path="res://scripts/ennemies/ennemy_basic.gd" id="2_hkhqe"]
[ext_resource type="PackedScene" uid="uid://bismflbts2r4b" path="res://scenes/health_bar.tscn" id="4_4abfe"]

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_fbe7l"]
points = PackedVector3Array(-9.78708e-05, 0.180856, -0.5, -9.78708e-05, 0.537457, -0.259397, 0.129307, 0.180856, -0.483066, -9.78708e-05, 0.0401974, -0.387627, -0.129503, 0.180856, -0.483066, -9.78708e-05, 0.585259, -0.211825, 0.0670517, 0.537457, -0.250587, -0.0671496, 0.537457, -0.250587, 0.129601, 0.537457, -0.224648, 0.249902, 0.180856, -0.433046, 0.193716, 0.0401974, -0.335748, 0.100235, 0.0401974, -0.374413, 0.0877056, 0, -0.327623, -9.78708e-05, 0, -0.339174, -0.0878035, 0, -0.327623, -0.100333, 0.0401974, -0.374413, -0.129699, 0.537457, -0.224648, -0.193814, 0.0401974, -0.335748, -0.250098, 0.180856, -0.433046, -9.78708e-05, 0.621941, -0.149765, 0.0386648, 0.621941, -0.144675, 0.0547181, 0.585259, -0.204581, -0.054816, 0.585259, -0.204581, -0.0387627, 0.621941, -0.144675, 0.105814, 0.585259, -0.183438, -0.105912, 0.585259, -0.183438, 0.18334, 0.537457, -0.183438, 0.353465, 0.180856, -0.353563, 0.16944, 0, -0.293755, 0.273982, 0.0401974, -0.27408, 0.239722, 0, -0.23982, -0.169636, 0, -0.293755, -0.183438, 0.537457, -0.183438, -0.27408, 0.0401974, -0.27408, -0.353563, 0.180856, -0.353563, -9.78708e-05, 0.644948, -0.0775254, 0.0199687, 0.644948, -0.0748825, 0.0386648, 0.644948, -0.0671496, 0.0747846, 0.621941, -0.129699, -0.0748825, 0.621941, -0.129699, -0.0387627, 0.644948, -0.0671496, -0.0200666, 0.644948, -0.0748825, 0.105814, 0.621941, -0.105912, 0.149667, 0.585259, -0.149765, -0.149765, 0.585259, -0.149765, -0.105912, 0.621941, -0.105912, 0.18334, 0.585259, -0.105912, 0.22455, 0.537457, -0.129699, 0.432948, 0.180856, -0.250098, 0.33565, 0.0401974, -0.193814, 0.293559, 0, -0.169636, -0.23982, 0, -0.23982, -0.183438, 0.585259, -0.105912, -0.433046, 0.180856, -0.250098, -0.224648, 0.537457, -0.129699, -0.293755, 0, -0.169636, -0.335748, 0.0401974, -0.193814, -9.78708e-05, 0.652872, -9.78708e-05, 0.0547181, 0.644948, -0.054816, -0.054816, 0.644948, -0.054816, 0.129601, 0.621941, -0.0748825, 0.0670517, 0.644948, -0.0387627, -0.129699, 0.621941, -0.0748825, -0.0671496, 0.644948, -0.0387627, 0.144577, 0.621941, -0.0387627, 0.204483, 0.585259, -0.054816, 0.250489, 0.537457, -0.0671496, 0.48287, 0.180856, -0.129503, 0.327525, 0, -0.0878035, 0.374315, 0.0401974, -0.100333, -0.144675, 0.621941, -0.0387627, -0.250587, 0.537457, -0.0671496, -0.204581, 0.585259, -0.054816, -0.483066, 0.180856, -0.129503, -0.327623, 0, -0.0878035, -0.374413, 0.0401974, -0.100333, -0.0748825, 0.644948, -0.0200666, -0.0775254, 0.644948, -9.78708e-05, -0.0748825, 0.644948, 0.0199687, -0.0671496, 0.644948, 0.0386648, -0.054816, 0.644948, 0.0547181, -0.0387627, 0.644948, 0.0670517, -0.0200666, 0.644948, 0.0747846, -9.78708e-05, 0.644948, 0.0774276, 0.0199687, 0.644948, 0.0747846, 0.0386648, 0.644948, 0.0670517, 0.0547181, 0.644948, 0.0547181, 0.0670517, 0.644948, 0.0386648, 0.0747846, 0.644948, 0.0199687, 0.0774276, 0.644948, -9.78708e-05, 0.0747846, 0.644948, -0.0200666, 0.149667, 0.621941, -9.78708e-05, 0.211727, 0.585259, -9.78708e-05, 0.259299, 0.537457, -9.78708e-05, 0.5, 0.180856, -9.78708e-05, 0.387529, 0.0401974, -9.78708e-05, 0.339076, 0, -9.78708e-05, -0.211825, 0.585259, -9.78708e-05, -0.149765, 0.621941, -9.78708e-05, -0.259397, 0.537457, -9.78708e-05, -0.387627, 0.0401974, -9.78708e-05, -0.5, 0.180856, -9.78708e-05, -0.339174, 0, -9.78708e-05, -0.144675, 0.621941, 0.0386648, -0.129699, 0.621941, 0.0747846, -0.105912, 0.621941, 0.105814, -0.0387627, 0.621941, 0.144577, -0.0748825, 0.621941, 0.129601, -9.78708e-05, 0.621941, 0.149667, 0.0386648, 0.621941, 0.144577, 0.0747846, 0.621941, 0.129601, 0.105814, 0.621941, 0.105814, 0.129601, 0.621941, 0.0747846, 0.144577, 0.621941, 0.0386648, 0.204483, 0.585259, 0.0547181, 0.250489, 0.537457, 0.0670517, 0.48287, 0.180856, 0.129307, 0.374315, 0.0401974, 0.100235, 0.327525, 0, 0.0877056, -0.204581, 0.585259, 0.0547181, -0.250587, 0.537457, 0.0670517, -0.483066, 0.180856, 0.129307, -0.327623, 0, 0.0877056, -0.374413, 0.0401974, 0.100235, -0.183438, 0.585259, 0.105814, -0.149765, 0.585259, 0.149667, -0.105912, 0.585259, 0.18334, -0.054816, 0.585259, 0.204483, -9.78708e-05, 0.585259, 0.211727, 0.0547181, 0.585259, 0.204483, 0.105814, 0.585259, 0.18334, 0.149667, 0.585259, 0.149667, 0.18334, 0.585259, 0.105814, 0.22455, 0.537457, 0.129601, 0.432948, 0.180856, 0.249902, 0.33565, 0.0401974, 0.193716, 0.293559, 0, 0.16944, -0.224648, 0.537457, 0.129601, -0.335748, 0.0401974, 0.193716, -0.433046, 0.180856, 0.249902, -0.293755, 0, 0.16944, -0.183438, 0.537457, 0.18334, -0.129699, 0.537457, 0.22455, -0.0671496, 0.537457, 0.250489, -9.78708e-05, 0.537457, 0.259299, 0.0670517, 0.537457, 0.250489, 0.129601, 0.537457, 0.22455, 0.18334, 0.537457, 0.18334, 0.353465, 0.180856, 0.353465, 0.273982, 0.0401974, 0.273982, 0.239722, 0, 0.239722, -0.23982, 0, 0.239722, -0.27408, 0.0401974, 0.273982, -0.353563, 0.180856, 0.353465, -0.250098, 0.180856, 0.432948, -0.129503, 0.180856, 0.48287, -9.78708e-05, 0.180856, 0.5, 0.129307, 0.180856, 0.48287, 0.249902, 0.180856, 0.432948, 0.193716, 0.0401974, 0.33565, 0.16944, 0, 0.293559, -0.193814, 0.0401974, 0.33565, -0.169636, 0, 0.293559, -0.100333, 0.0401974, 0.374315, -9.78708e-05, 0.0401974, 0.387529, 0.100235, 0.0401974, 0.374315, 0.0877056, 0, 0.327525, -0.0878035, 0, 0.327525, -9.78708e-05, 0, 0.339076)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_wu1ne"]
render_priority = 0
shader = ExtResource("2_bnd7i")
shader_parameter/health_ratio = 0.0

[sub_resource type="PlaneMesh" id="PlaneMesh_kxp1e"]
material = SubResource("ShaderMaterial_wu1ne")
size = Vector2(1.5, 0.25)
subdivide_width = 32

[sub_resource type="ViewportTexture" id="ViewportTexture_dae3s"]
viewport_path = NodePath("SubViewport")

[node name="BasicEnnemy" type="CharacterBody3D"]
script = ExtResource("2_hkhqe")
vitesse = 0.5

[node name="EnnemyShape" type="MeshInstance3D" parent="."]
mesh = ExtResource("1_1v4y8")

[node name="EnnemyCollision" type="CollisionShape3D" parent="."]
shape = SubResource("ConvexPolygonShape3D_fbe7l")

[node name="HealtBar" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.763834, 0)
mesh = SubResource("PlaneMesh_kxp1e")

[node name="SubViewport" type="SubViewport" parent="."]
disable_3d = true
transparent_bg = true

[node name="HealthBar" parent="SubViewport" instance=ExtResource("4_4abfe")]

[node name="Sprite3D" type="Sprite3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.843, 0)
billboard = 1
texture = SubResource("ViewportTexture_dae3s")
